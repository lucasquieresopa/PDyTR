Vagrant.configure("2") do |config|
	# Definición de las máquinas
	config.vm.define "vm3" do |machine|	# vm3 va a ser el que ejecute los programas de cliente

		hostname = "vm3"
		ip = "192.168.56.13"

		machine.vm.box = "hashicorp/bionic64"
		machine.vm.network "private_network", ip: ip
		machine.vm.hostname = hostname

		machine.vm.provider "virtualbox" do |vb|
			vb.memory = "512"
			vb.name = "vm3"
	      	end

	      	machine.vm.provision "shell", inline: <<-SHELL
			# Get updated urls/packages sources? & tools
			apt-get update

			# Get several software packages
			apt-get install -y net-tools debconf-utils joe zip libc-dev-bin build-essential default-jdk

			# The alias for ls
			grep -q "alias ls='ls -la'" /home/vagrant/.bashrc || echo -e "\\nalias ls='ls -la'" >> /home/vagrant/.bashrc

			sudo rm -rf /opt/pdytr
			git clone https://github.com/lucasquieresopa/PDyTR.git /opt/pdytr


			Ejecucion punto 2
			cd /opt/pdytr/punto2/
			sudo gcc -o cliente client-full.c
			./cliente 10.0.2.2 6901

			Ejecucion punto 3
			cd /opt/pdytr/punto3/
			sudo gcc -o cliente client3.c
			./cliente 10.0.2.2 6902



		SHELL
	end
end